<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_16) on Thu Feb 28 22:10:43 CET 2008 -->
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<TITLE>
IDBroker (Torque 3.3 API)
</TITLE>

<META NAME="keywords" CONTENT="org.apache.torque.oid.IDBroker class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="IDBroker (Torque 3.3 API)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/IDBroker.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/apache/torque/oid/AutoIncrementIdGenerator.html" title="class in org.apache.torque.oid"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/apache/torque/oid/IDGeneratorFactory.html" title="class in org.apache.torque.oid"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="IDBroker.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.torque.oid</FONT>
<BR>
Class IDBroker</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by"><B>org.apache.torque.oid.IDBroker</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A>, java.lang.Runnable</DD>
</DL>
<HR>
<DL>
<DT>public class <B>IDBroker</B><DT>extends java.lang.Object<DT>implements java.lang.Runnable, <A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A></DL>

<P>
This method of ID generation is used to ensure that code is
 more database independent.  For example, MySQL has an auto-increment
 feature while Oracle uses sequences.  It caches several ids to
 avoid needing a Connection for every request.

 This class uses the table ID_TABLE defined in
 conf/master/id-table-schema.xml.  The columns in ID_TABLE are used as
 follows:<br>

 ID_TABLE_ID - The PK for this row (any unique int).<br>
 TABLE_NAME - The name of the table you want ids for.<br>
 NEXT_ID - The next id returned by IDBroker when it queries the
           database (not when it returns an id from memory).<br>
 QUANTITY - The number of ids that IDBroker will cache in memory.<br>
 <p>
 Use this class like this:
 <pre>
 int id = dbMap.getIDBroker().getNextIdAsInt(null, "TABLE_NAME");
  - or -
 BigDecimal[] ids = ((IDBroker)dbMap.getIDBroker())
     .getNextIds("TABLE_NAME", numOfIdsToReturn);
 </pre>

 NOTE: When the ID_TABLE must be updated we must ensure that
 IDBroker objects running in different JVMs do not overwrite each
 other.  This is accomplished using using the transactional support
 occuring in some databases.  Using this class with a database that
 does not support transactions should be limited to a single JVM.
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>$Id: IDBroker.java 552333 2007-07-01 16:24:19Z tv $</DD>
<DT><B>Author:</B></DT>
  <DD><a href="mailto:frank.kim@clearink.com">Frank Y. Kim</a>, <a href="mailto:jmcnally@collab.net">John D. McNally</a>, <a href="mailto:hps@intermeta.de">Henning P. Schmiedehausen</a></DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#COL_NEXT_ID">COL_NEXT_ID</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Next_ID column name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#COL_QUANTITY">COL_QUANTITY</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quantity column name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#COL_TABLE_ID">COL_TABLE_ID</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ID column name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#COL_TABLE_NAME">COL_TABLE_NAME</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Table_Name column name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#ID_TABLE">ID_TABLE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name of the ID_TABLE = ID_TABLE</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#NEXT_ID">NEXT_ID</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fully qualified Next_ID column name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#QUANTITY">QUANTITY</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fully qualified Quantity column name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#TABLE_ID">TABLE_ID</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fully qualified ID column name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#TABLE_NAME">TABLE_NAME</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fully qualified Table_Name column name</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#IDBroker(org.apache.torque.Database)">IDBroker</A></B>(<A HREF="../../../../org/apache/torque/Database.html" title="class in org.apache.torque">Database</A>&nbsp;database)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructs an IdBroker for the given Database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#IDBroker(org.apache.torque.map.TableMap)">IDBroker</A></B>(<A HREF="../../../../org/apache/torque/map/TableMap.html" title="class in org.apache.torque.map">TableMap</A>&nbsp;tMap)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;<I>Use IDBroker(DatabaseInfo) instead. Will be removed
             in a future version of Torque.</I></TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#exists(java.lang.String)">exists</A></B>(java.lang.String&nbsp;tableName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.math.BigDecimal</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#getIdAsBigDecimal(java.sql.Connection, java.lang.Object)">getIdAsBigDecimal</A></B>(java.sql.Connection&nbsp;connection,
                  java.lang.Object&nbsp;tableName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an id as a BigDecimal. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#getIdAsInt(java.sql.Connection, java.lang.Object)">getIdAsInt</A></B>(java.sql.Connection&nbsp;connection,
           java.lang.Object&nbsp;tableName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an id as a primitive int.  </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#getIdAsLong(java.sql.Connection, java.lang.Object)">getIdAsLong</A></B>(java.sql.Connection&nbsp;connection,
            java.lang.Object&nbsp;tableName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an id as a primitive long. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#getIdAsString(java.sql.Connection, java.lang.Object)">getIdAsString</A></B>(java.sql.Connection&nbsp;connection,
              java.lang.Object&nbsp;tableName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an id as a String. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.math.BigDecimal[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#getNextIds(java.lang.String, int)">getNextIds</A></B>(java.lang.String&nbsp;tableName,
           int&nbsp;numOfIdsToReturn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns x number of ids for the given table.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.math.BigDecimal[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#getNextIds(java.lang.String, int, java.sql.Connection)">getNextIds</A></B>(java.lang.String&nbsp;tableName,
           int&nbsp;numOfIdsToReturn,
           java.sql.Connection&nbsp;connection)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns x number of ids for the given table.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#isConnectionRequired()">isConnectionRequired</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A flag to determine whether a Connection is required to
 generate an id.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#isPostInsert()">isPostInsert</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A flag to determine the timing of the id generation</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#isPriorToInsert()">isPriorToInsert</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A flag to determine the timing of the id generation     *</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#run()">run</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A background thread that tries to ensure that when someone asks
 for ids, that there are already some loaded and that the
 database is not accessed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#setConfiguration(org.apache.commons.configuration.Configuration)">setConfiguration</A></B>(org.apache.commons.configuration.Configuration&nbsp;configuration)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the configuration</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/torque/oid/IDBroker.html#stop()">stop</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Shuts down the IDBroker thread.

 </TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="ID_TABLE"><!-- --></A><H3>
ID_TABLE</H3>
<PRE>
public static final java.lang.String <B>ID_TABLE</B></PRE>
<DL>
<DD>Name of the ID_TABLE = ID_TABLE
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.ID_TABLE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="COL_TABLE_NAME"><!-- --></A><H3>
COL_TABLE_NAME</H3>
<PRE>
public static final java.lang.String <B>COL_TABLE_NAME</B></PRE>
<DL>
<DD>Table_Name column name
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.COL_TABLE_NAME">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="TABLE_NAME"><!-- --></A><H3>
TABLE_NAME</H3>
<PRE>
public static final java.lang.String <B>TABLE_NAME</B></PRE>
<DL>
<DD>Fully qualified Table_Name column name
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.TABLE_NAME">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="COL_TABLE_ID"><!-- --></A><H3>
COL_TABLE_ID</H3>
<PRE>
public static final java.lang.String <B>COL_TABLE_ID</B></PRE>
<DL>
<DD>ID column name
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.COL_TABLE_ID">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="TABLE_ID"><!-- --></A><H3>
TABLE_ID</H3>
<PRE>
public static final java.lang.String <B>TABLE_ID</B></PRE>
<DL>
<DD>Fully qualified ID column name
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.TABLE_ID">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="COL_NEXT_ID"><!-- --></A><H3>
COL_NEXT_ID</H3>
<PRE>
public static final java.lang.String <B>COL_NEXT_ID</B></PRE>
<DL>
<DD>Next_ID column name
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.COL_NEXT_ID">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="NEXT_ID"><!-- --></A><H3>
NEXT_ID</H3>
<PRE>
public static final java.lang.String <B>NEXT_ID</B></PRE>
<DL>
<DD>Fully qualified Next_ID column name
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.NEXT_ID">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="COL_QUANTITY"><!-- --></A><H3>
COL_QUANTITY</H3>
<PRE>
public static final java.lang.String <B>COL_QUANTITY</B></PRE>
<DL>
<DD>Quantity column name
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.COL_QUANTITY">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="QUANTITY"><!-- --></A><H3>
QUANTITY</H3>
<PRE>
public static final java.lang.String <B>QUANTITY</B></PRE>
<DL>
<DD>Fully qualified Quantity column name
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.torque.oid.IDBroker.QUANTITY">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="IDBroker(org.apache.torque.Database)"><!-- --></A><H3>
IDBroker</H3>
<PRE>
public <B>IDBroker</B>(<A HREF="../../../../org/apache/torque/Database.html" title="class in org.apache.torque">Database</A>&nbsp;database)</PRE>
<DL>
<DD>constructs an IdBroker for the given Database.
<P>
<DT><B>Parameters:</B><DD><CODE>database</CODE> - the database where this IdBroker is running in.</DL>
<HR>

<A NAME="IDBroker(org.apache.torque.map.TableMap)"><!-- --></A><H3>
IDBroker</H3>
<PRE>
public <B>IDBroker</B>(<A HREF="../../../../org/apache/torque/map/TableMap.html" title="class in org.apache.torque.map">TableMap</A>&nbsp;tMap)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<I>Use IDBroker(DatabaseInfo) instead. Will be removed
             in a future version of Torque.</I>
<P>
<DD>Creates an IDBroker for the ID table.
<P>
<DT><B>Parameters:</B><DD><CODE>tMap</CODE> - A TableMap.</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="setConfiguration(org.apache.commons.configuration.Configuration)"><!-- --></A><H3>
setConfiguration</H3>
<PRE>
public void <B>setConfiguration</B>(org.apache.commons.configuration.Configuration&nbsp;configuration)</PRE>
<DL>
<DD>Set the configuration
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>configuration</CODE> - the configuration</DL>
</DD>
</DL>
<HR>

<A NAME="getIdAsInt(java.sql.Connection, java.lang.Object)"><!-- --></A><H3>
getIdAsInt</H3>
<PRE>
public int <B>getIdAsInt</B>(java.sql.Connection&nbsp;connection,
                      java.lang.Object&nbsp;tableName)
               throws java.lang.Exception</PRE>
<DL>
<DD>Returns an id as a primitive int.  Note this method does not
 require a Connection, it just implements the KeyGenerator
 interface.  if a Connection is needed one will be requested.
 To force the use of the passed in connection set the configuration
 property torque.idbroker.usenewconnection = false
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html#getIdAsInt(java.sql.Connection, java.lang.Object)">getIdAsInt</A></CODE> in interface <CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - A Connection.<DD><CODE>tableName</CODE> - an Object that contains additional info.
<DT><B>Returns:</B><DD>An int with the value for the id.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - Database error.</DL>
</DD>
</DL>
<HR>

<A NAME="getIdAsLong(java.sql.Connection, java.lang.Object)"><!-- --></A><H3>
getIdAsLong</H3>
<PRE>
public long <B>getIdAsLong</B>(java.sql.Connection&nbsp;connection,
                        java.lang.Object&nbsp;tableName)
                 throws java.lang.Exception</PRE>
<DL>
<DD>Returns an id as a primitive long. Note this method does not
 require a Connection, it just implements the KeyGenerator
 interface.  if a Connection is needed one will be requested.
 To force the use of the passed in connection set the configuration
 property torque.idbroker.usenewconnection = false
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html#getIdAsLong(java.sql.Connection, java.lang.Object)">getIdAsLong</A></CODE> in interface <CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - A Connection.<DD><CODE>tableName</CODE> - a String that identifies a table.
<DT><B>Returns:</B><DD>A long with the value for the id.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - Database error.</DL>
</DD>
</DL>
<HR>

<A NAME="getIdAsBigDecimal(java.sql.Connection, java.lang.Object)"><!-- --></A><H3>
getIdAsBigDecimal</H3>
<PRE>
public java.math.BigDecimal <B>getIdAsBigDecimal</B>(java.sql.Connection&nbsp;connection,
                                              java.lang.Object&nbsp;tableName)
                                       throws java.lang.Exception</PRE>
<DL>
<DD>Returns an id as a BigDecimal. Note this method does not
 require a Connection, it just implements the KeyGenerator
 interface.  if a Connection is needed one will be requested.
 To force the use of the passed in connection set the configuration
 property torque.idbroker.usenewconnection = false
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html#getIdAsBigDecimal(java.sql.Connection, java.lang.Object)">getIdAsBigDecimal</A></CODE> in interface <CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - A Connection.<DD><CODE>tableName</CODE> - a String that identifies a table..
<DT><B>Returns:</B><DD>A BigDecimal id.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - Database error.</DL>
</DD>
</DL>
<HR>

<A NAME="getIdAsString(java.sql.Connection, java.lang.Object)"><!-- --></A><H3>
getIdAsString</H3>
<PRE>
public java.lang.String <B>getIdAsString</B>(java.sql.Connection&nbsp;connection,
                                      java.lang.Object&nbsp;tableName)
                               throws java.lang.Exception</PRE>
<DL>
<DD>Returns an id as a String. Note this method does not
 require a Connection, it just implements the KeyGenerator
 interface.  if a Connection is needed one will be requested.
 To force the use of the passed in connection set the configuration
 property torque.idbroker.usenewconnection = false
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html#getIdAsString(java.sql.Connection, java.lang.Object)">getIdAsString</A></CODE> in interface <CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - A Connection should be null.<DD><CODE>tableName</CODE> - a String that identifies a table.
<DT><B>Returns:</B><DD>A String id
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - Database error.</DL>
</DD>
</DL>
<HR>

<A NAME="isPriorToInsert()"><!-- --></A><H3>
isPriorToInsert</H3>
<PRE>
public boolean <B>isPriorToInsert</B>()</PRE>
<DL>
<DD>A flag to determine the timing of the id generation     *
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html#isPriorToInsert()">isPriorToInsert</A></CODE> in interface <CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>a <code>boolean</code> value</DL>
</DD>
</DL>
<HR>

<A NAME="isPostInsert()"><!-- --></A><H3>
isPostInsert</H3>
<PRE>
public boolean <B>isPostInsert</B>()</PRE>
<DL>
<DD>A flag to determine the timing of the id generation
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html#isPostInsert()">isPostInsert</A></CODE> in interface <CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>a <code>boolean</code> value</DL>
</DD>
</DL>
<HR>

<A NAME="isConnectionRequired()"><!-- --></A><H3>
isConnectionRequired</H3>
<PRE>
public boolean <B>isConnectionRequired</B>()</PRE>
<DL>
<DD>A flag to determine whether a Connection is required to
 generate an id.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html#isConnectionRequired()">isConnectionRequired</A></CODE> in interface <CODE><A HREF="../../../../org/apache/torque/oid/IdGenerator.html" title="interface in org.apache.torque.oid">IdGenerator</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>a <code>boolean</code> value</DL>
</DD>
</DL>
<HR>

<A NAME="getNextIds(java.lang.String, int)"><!-- --></A><H3>
getNextIds</H3>
<PRE>
public java.math.BigDecimal[] <B>getNextIds</B>(java.lang.String&nbsp;tableName,
                                         int&nbsp;numOfIdsToReturn)
                                  throws java.lang.Exception</PRE>
<DL>
<DD>This method returns x number of ids for the given table.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tableName</CODE> - The name of the table for which we want an id.<DD><CODE>numOfIdsToReturn</CODE> - The desired number of ids.
<DT><B>Returns:</B><DD>A BigDecimal.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - Database error.</DL>
</DD>
</DL>
<HR>

<A NAME="getNextIds(java.lang.String, int, java.sql.Connection)"><!-- --></A><H3>
getNextIds</H3>
<PRE>
public java.math.BigDecimal[] <B>getNextIds</B>(java.lang.String&nbsp;tableName,
                                         int&nbsp;numOfIdsToReturn,
                                         java.sql.Connection&nbsp;connection)
                                  throws java.lang.Exception</PRE>
<DL>
<DD>This method returns x number of ids for the given table.
 Note this method does not require a Connection.
 If a Connection is needed one will be requested.
 To force the use of the passed in connection set the configuration
 property torque.idbroker.usenewconnection = false
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tableName</CODE> - The name of the table for which we want an id.<DD><CODE>numOfIdsToReturn</CODE> - The desired number of ids.<DD><CODE>connection</CODE> - A Connection.
<DT><B>Returns:</B><DD>A BigDecimal.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - Database error.</DL>
</DD>
</DL>
<HR>

<A NAME="exists(java.lang.String)"><!-- --></A><H3>
exists</H3>
<PRE>
public boolean <B>exists</B>(java.lang.String&nbsp;tableName)
               throws java.lang.Exception</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tableName</CODE> - a <code>String</code> value that is used to identify
 the row
<DT><B>Returns:</B><DD>a <code>boolean</code> value
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/apache/torque/TorqueException.html" title="class in org.apache.torque">TorqueException</A></CODE> - if a Torque error occurs.
<DD><CODE>java.lang.Exception</CODE> - if another error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="run()"><!-- --></A><H3>
run</H3>
<PRE>
public void <B>run</B>()</PRE>
<DL>
<DD>A background thread that tries to ensure that when someone asks
 for ids, that there are already some loaded and that the
 database is not accessed.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>run</CODE> in interface <CODE>java.lang.Runnable</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="stop()"><!-- --></A><H3>
stop</H3>
<PRE>
public void <B>stop</B>()</PRE>
<DL>
<DD>Shuts down the IDBroker thread.

 Calling this method stops the thread that was started for this
 instance of the IDBroker. This method should be called during
 MapBroker Service shutdown.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/IDBroker.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/apache/torque/oid/AutoIncrementIdGenerator.html" title="class in org.apache.torque.oid"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/apache/torque/oid/IDGeneratorFactory.html" title="class in org.apache.torque.oid"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="IDBroker.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2000-2008 Apache Software Foundation. All Rights Reserved.
</BODY>
</HTML>
